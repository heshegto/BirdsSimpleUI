{
    "ClientConfiguration": {
        "ConfigurationName": "Конфигурация для птичек",
        "ConfigurationDescription": "Разработка конфигурации для птичек в SimpleUI",
        "ConfigurationVersion": "0.0.1",
        "Processes": [
            {
                "type": "Process",
                "ProcessName": "Птицы",
                "PlanFactHeader": "План-факт",
                "DefineOnBackPressed": true,
                "hidden": false,
                "login_screen": false,
                "SC": false,
                "Operations": [
                    {
                        "type": "Operation",
                        "Name": "Меню",
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "noConfirmation": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "send_when_opened": false,
                        "onlineOnInput": false,
                        "DefOnlineOnCreate": "",
                        "DefOnlineOnInput": "",
                        "DefOnCreate": "menu_on_start",
                        "DefOnInput": "menu_on_input",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "match_parent",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "CButtons",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "Список;Создание",
                                        "Variable": "menu"
                                    }
                                ]
                            }
                        ]
                    },
                    {
                        "Name": "Создание новой птицы",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "match_parent",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Название птицы",
                                        "Variable": "",
                                        "BackgroundColor": "grey"
                                    },
                                    {
                                        "type": "EditTextText",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "name_bird"
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Цвет птицы",
                                        "Variable": "",
                                        "BackgroundColor": "grey"
                                    },
                                    {
                                        "type": "EditTextText",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "color_bird"
                                    },
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "сохранить",
                                        "Variable": "save_bird"
                                    },
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@saved_bird",
                                        "Variable": "saved_bird"
                                    },
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "Удалить все",
                                        "Variable": "del_all"
                                    }
                                ]
                            },
                            {
                                "Value": "",
                                "Variable": "foto",
                                "type": "photo"
                            },
                            {
                                "Value": "",
                                "Variable": "foto",
                                "type": "photoGallery"
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnInput": "create_on_input",
                        "DefOnCreate": "create_on_start",
                        "DefOnlineOnCreate": ""
                    },
                    {
                        "Name": "Карточка птицы",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "LinearLayout",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "",
                                        "Variable": "",
                                        "orientation": "horizontal",
                                        "Elements": [
                                            {
                                                "type": "LinearLayout",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "Elements": [
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "Value": "id:",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "Value": "@selected_card_key",
                                                        "Variable": ""
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "Elements": [
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "Value": "Название",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "Value": "@bird_name",
                                                        "Variable": ""
                                                    }
                                                ]
                                            },
                                            {
                                                "type": "LinearLayout",
                                                "height": "wrap_content",
                                                "width": "wrap_content",
                                                "weight": "0",
                                                "Value": "",
                                                "Variable": "",
                                                "orientation": "vertical",
                                                "Elements": [
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "Value": "Цвет",
                                                        "Variable": ""
                                                    },
                                                    {
                                                        "type": "TextView",
                                                        "height": "wrap_content",
                                                        "width": "wrap_content",
                                                        "weight": "0",
                                                        "Value": "@bird_color",
                                                        "Variable": ""
                                                    }
                                                ]
                                            }
                                        ]
                                    },
                                    {
                                        "type": "Picture",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@image",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "Видел",
                                        "Variable": "btn_saw"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnInput": "card_on_input",
                        "DefOnCreate": "card_on_start"
                    },
                    {
                        "Name": "Список птиц",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "match_parent",
                                "width": "match_parent",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "Добавить птицу",
                                        "Variable": "create_new"
                                    },
                                    {
                                        "type": "CardsLayout",
                                        "height": "match_parent",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "@cards",
                                        "Variable": "res"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false,
                        "DefOnlineOnCreate": "",
                        "DefOnCreate": "list_on_start",
                        "DefOnInput": "list_on_input"
                    }
                ]
            },
            {
                "ProcessName": "Птицы, которых я видел",
                "type": "Process",
                "Operations": [
                    {
                        "Name": "Птицы, которых я видел",
                        "type": "Operation",
                        "Elements": [
                            {
                                "Value": "",
                                "Variable": "",
                                "type": "LinearLayout",
                                "weight": "0",
                                "height": "wrap_content",
                                "width": "wrap_content",
                                "orientation": "vertical",
                                "Elements": [
                                    {
                                        "type": "TextView",
                                        "height": "wrap_content",
                                        "width": "wrap_content",
                                        "weight": "0",
                                        "Value": "@selected_card_key",
                                        "Variable": ""
                                    },
                                    {
                                        "type": "Button",
                                        "height": "wrap_content",
                                        "width": "match_parent",
                                        "weight": "0",
                                        "Value": "+",
                                        "Variable": "add_to_i_saw"
                                    }
                                ]
                            }
                        ],
                        "Timer": false,
                        "hideToolBarScreen": false,
                        "noScroll": false,
                        "handleKeyUp": false,
                        "hideBottomBarScreen": true,
                        "onlineOnStart": false,
                        "onlineOnInput": false
                    }
                ]
            }
        ],
        "ConfigurationSettings": {
            "uid": "41326a68f830438281eb8c039b871e90",
            "vendor": ""
        },
        "ConfigurationTags": "Py,off-line",
        "PyFiles": [],
        "RunPython": true,
        "PyHandlers": "aW1wb3J0IGpzb24KZnJvbSBydS50cmF2ZWxmb29kLnNpbXBsZV91aSBpbXBvcnQgTm9TUUwgYXMgbm9DbGFzcwpmcm9tIGphdmEgaW1wb3J0IGpjbGFzcwoKZnJvbSBhbmRyb2lkLndpZGdldCBpbXBvcnQgVG9hc3QKZnJvbSBjb20uY2hhcXVvLnB5dGhvbiBpbXBvcnQgUHl0aG9uCgojIC0tLS0tLS0g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDRjdC60YDQsNC90LAg0JzQtdC90Y4gLS0tLS0tLQpkZWYgbWVudV9vbl9zdGFydChoYXNoTWFwLF9maWxlcz1Ob25lLF9kYXRhPU5vbmUpOiAgIAogICAgcmV0dXJuIGhhc2hNYXAKCmRlZiBtZW51X29uX2lucHV0KGhhc2hNYXAsX2ZpbGVzPU5vbmUsX2RhdGE9Tm9uZSk6CiAgICBpZiBoYXNoTWFwLmdldCgibGlzdGVuZXIiKT09Im1lbnUiOgogICAgICAgIGlmIGhhc2hNYXAuZ2V0KCJtZW51Iik9PSLQodC/0LjRgdC+0LoiOgogICAgICAgICAgICBoYXNoTWFwLnB1dCgiU2hvd1NjcmVlbiIsItCh0L/QuNGB0L7QuiDQv9GC0LjRhiIpICAgICAgICAKICAgICAgICBlbGlmIGhhc2hNYXAuZ2V0KCJtZW51Iik9PSLQodC+0LfQtNCw0L3QuNC1IjoKICAgICAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCLQodC+0LfQtNCw0L3QuNC1INC90L7QstC+0Lkg0L/RgtC40YbRiyIpICAgIAogICAgZWxpZiAgaGFzaE1hcC5nZXQoImxpc3RlbmVyIik9PSdPTl9CQUNLX1BSRVNTRUQnOiAKICAgICAgICAgICAgaGFzaE1hcC5wdXQoIkZpbmlzaFByb2Nlc3MiLCIiKSAgICAgCiAgICByZXR1cm4gaGFzaE1hcAoKCiMgLS0tLS0tLSDQntCx0YDQsNCx0L7RgtGH0LrQuNC60Lgg0Y3QutGA0LDQvdCwINCh0L7Qt9C00LDQvdC40LUg0L3QvtCy0L7QuSDQv9GC0LjRhtGLIC0tLS0tLS0KZGVmIGNyZWF0ZV9vbl9zdGFydChoYXNoTWFwLF9maWxlcz1Ob25lLF9kYXRhPU5vbmUpOgogICAgaWYgbm90IGhhc2hNYXAuY29udGFpbnNLZXkoInNhdmVkX2JpcmQiKToKICAgICAgICBoYXNoTWFwLnB1dCgic2F2ZWRfYmlyZCIsIiIpCiAgICByZXR1cm4gaGFzaE1hcAoKZGVmIGNyZWF0ZV9vbl9pbnB1dChoYXNoTWFwLF9maWxlcz1Ob25lLF9kYXRhPU5vbmUpOgogICAgbm9DbGFzcyA9IGpjbGFzcygicnUudHJhdmVsZm9vZC5zaW1wbGVfdWkuTm9TUUwiKQogICAgbmNsID0gbm9DbGFzcygidGVzdF9ub3NxbCIpCgogICAgaWYgaGFzaE1hcC5nZXQoImxpc3RlbmVyIik9PSJzYXZlX2JpcmQiOgogICAgICAgIGlmIGhhc2hNYXAuY29udGFpbnNLZXkoIm5hbWVfYmlyZCIpIGFuZCBoYXNoTWFwLmNvbnRhaW5zS2V5KCJjb2xvcl9iaXJkIik6CgogICAgICAgICAgICBuYW1lLCBjb2xvciA9IGhhc2hNYXAuZ2V0KCJuYW1lX2JpcmQiKSwgaGFzaE1hcC5nZXQoImNvbG9yX2JpcmQiKQogICAgICAgICAgICBqID0gewogICAgICAgICAgICAgICAgIm5hbWUiOiBuYW1lLAogICAgICAgICAgICAgICAgImNvbG9yIjogY29sb3IKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiBoYXNoTWFwLmNvbnRhaW5zS2V5KCJmb3RvIik6CiAgICAgICAgICAgICAgICBqWyJmb3RvIl0gPSBoYXNoTWFwLmdldCgiZm90byIpCiAgICAgICAgICAgIGprZXlzID0gbmNsLmdldGFsbGtleXMoKQogICAgICAgICAgICBrZXlzID0ganNvbi5sb2Fkcyhqa2V5cykKICAgICAgICAgICAgaWQgPSAwCiAgICAgICAgICAgIGlmIGxlbihrZXlzKSA+IDA6CiAgICAgICAgICAgICAgICBpZCA9IG1heChbaW50KHgpIGZvciB4IGluIGtleXNdKSArIDEKCiAgICAgICAgICAgIG5jbC5wdXQoc3RyKGlkKSwganNvbi5kdW1wcyhqLGVuc3VyZV9hc2NpaT1GYWxzZSksIFRydWUpCgogICAgICAgICAgICBoYXNoTWFwLnB1dCgic2F2ZWRfYmlyZCIsIHN0cihpZCkrJyAnKyBuYW1lKycgJytjb2xvcikKICAgICAgICAgICAKICAgIGlmIGhhc2hNYXAuZ2V0KCJsaXN0ZW5lciIpPT0nT05fQkFDS19QUkVTU0VEJzogCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCLQnNC10L3RjiIpICAgIAogICAgaWYgaGFzaE1hcC5nZXQoImxpc3RlbmVyIik9PSdkZWxfYWxsJzoKICAgICAgICBuY2wuZGVzdHJveSgpCiAgICAgICAgaGFzaE1hcC5wdXQoInNwZWFrIiwiQXR0ZW50aW9uISBBbGwgZGF0YSBoYXMgYmVlbiBkZXN0cm95ZWQhIikKICAgIHJldHVybiBoYXNoTWFwIAoKCiMgLS0tLS0tLSDQntCx0YDQsNCx0L7RgtGH0LjQutC4INGN0LrRgNCw0L3QsCDQmtCw0YDRgtC+0YfQutCwINC/0YLQuNGG0YsgLS0tLS0tLQpkZWYgY2FyZF9vbl9zdGFydChoYXNoTWFwLCBmaWxlcz1Ob25lLCBkYXRhPU5vbmUpOgogICAgbm9DbGFzcyA9IGpjbGFzcygicnUudHJhdmVsZm9vZC5zaW1wbGVfdWkuTm9TUUwiKQogICAgbmNsID0gbm9DbGFzcygidGVzdF9ub3NxbCIpCiAgICBiaXJkID0ganNvbi5sb2FkcyhuY2wuZ2V0KGhhc2hNYXAuZ2V0KCJzZWxlY3RlZF9jYXJkX2tleSIpKSkKCiAgICBoYXNoTWFwLnB1dCgiYmlyZF9uYW1lIiwgYmlyZFsnbmFtZSddKQogICAgaGFzaE1hcC5wdXQoImJpcmRfY29sb3IiLCBiaXJkWydjb2xvciddKQogICAgaWYgJ2ZvdG8nIGluIGJpcmQua2V5cygpOgogICAgICAgIGhhc2hNYXAucHV0KCJpbWFnZSIsIGJpcmRbJ2ZvdG8nXSkKICAgIGVsc2U6CiAgICAgICAgaGFzaE1hcC5wdXQoImltYWdlIiwgIk5vbmUiKQogICAgaWYgaGFzaE1hcC5nZXQoImxpc3RlbmVyIikgPT0gJ2J0bl9zYXcnOgogICAgICAgIGhhc2hNYXAucHV0KCJTdGFydFByb2Nlc3MiLCAi0J/RgtC40YbRiywg0LrQvtGC0L7RgNGL0YUg0Y8g0LLQuNC00LXQuyIpCiAgICByZXR1cm4gaGFzaE1hcAoKZGVmIGNhcmRfb25faW5wdXQoaGFzaE1hcCwgZmlsZXM9Tm9uZSwgZGF0YT1Ob25lKToKICAgIGlmIGhhc2hNYXAuZ2V0KCJsaXN0ZW5lciIpPT0nT05fQkFDS19QUkVTU0VEJzogCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCLQodC/0LjRgdC+0Log0L/RgtC40YYiKQogICAgcmV0dXJuIGhhc2hNYXAKCgojIC0tLS0tLS0g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDRjdC60YDQsNC90LAg0KHQv9C40YHQvtC6INC/0YLQuNGGIC0tLS0tLS0KZGVmIGxpc3Rfb25fc3RhcnQoaGFzaE1hcCxfZmlsZXM9Tm9uZSxfZGF0YT1Ob25lKToKICAgIG5vQ2xhc3MgPSBqY2xhc3MoInJ1LnRyYXZlbGZvb2Quc2ltcGxlX3VpLk5vU1FMIikKICAgIG5jbCA9IG5vQ2xhc3MoInRlc3Rfbm9zcWwiKQoKICAgIGogPSB7ICJjdXN0b21jYXJkcyI6ICAgICAgICAgewogICAgICAgICAgICAKICAgICAgICAgICAgImxheW91dCI6IHsKICAgICAgICAgICAgInR5cGUiOiAiTGluZWFyTGF5b3V0IiwKICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgImhlaWdodCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgIndlaWdodCI6ICIwIiwKICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogImhvcml6b250YWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgInR5cGUiOiAiUGljdHVyZSIsCiAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAcGljMSIsCiAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgIlRleHRTaXplIjogIjE2IiwKICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiI0RCNzA5MyIsCiAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBUcnVlLAogICAgICAgICAgICAgICAgIlRleHRJdGFsaWMiOiBGYWxzZSwKICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiIiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6IDIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAgICAgIm9yaWVudGF0aW9uIjogInZlcnRpY2FsIiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6ICIxIiwKICAgICAgICAgICAgICAgICJFbGVtZW50cyI6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAgICAgInNob3dfYnlfY29uZGl0aW9uIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIlZhbHVlIjogIkBzdHJpbmcxIiwKICAgICAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHN0cmluZzIiLAogICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJUZXh0VmlldyIsCiAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAZGVzY3IiLAogICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgImRvY3VtZW50X3R5cGUiOiAiIiwKICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIiwKICAgICAgICAgICAgICAgICJUZXh0U2l6ZSI6ICItMSIsCiAgICAgICAgICAgICAgICAiVGV4dENvbG9yIjogIiM2RjkzOTMiLAogICAgICAgICAgICAgICAgIlRleHRCb2xkIjogRmFsc2UsCiAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IFRydWUsCiAgICAgICAgICAgICAgICAiQmFja2dyb3VuZENvbG9yIjogIiIsCiAgICAgICAgICAgICAgICAid2lkdGgiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJoZWlnaHQiOiAid3JhcF9jb250ZW50IiwKICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAwCiAgICAgICAgICAgIH0KICAgICAgICAgICAgXQogICAgICAgIH0KCiAgICB9CiAgICB9CgoKICAgIGtleXMgPSBuY2wuZ2V0YWxsa2V5cygpCiAgICBqa2V5cyA9IGpzb24ubG9hZHMoa2V5cykKICAgCiAgICBqWyJjdXN0b21jYXJkcyJdWyJjYXJkc2RhdGEiXT1bXQogICAgZm9yIGkgaW4gamtleXM6CiAgICAgICAgYmlyZCA9IGpzb24ubG9hZHMobmNsLmdldChpKSkKICAgICAgICBjID0gIHsKICAgICAgICAia2V5IjogaSwKICAgICAgICAiZGVzY3IiOiAiUG9zLiAiK2ksCiAgICAgICAgInN0cmluZzEiOiBiaXJkWyduYW1lJ10sCiAgICAgICAgInN0cmluZzIiOiBiaXJkWydjb2xvciddLAogICAgICAgIH0KICAgICAgICBpZiAnZm90bycgaW4gYmlyZC5rZXlzKCk6CiAgICAgICAgICAgIGNbInBpYzEiXSA9IGJpcmRbJ2ZvdG8nXQogICAgICAgIGpbImN1c3RvbWNhcmRzIl1bImNhcmRzZGF0YSJdLmFwcGVuZChjKQoKICAgIGhhc2hNYXAucHV0KCJjYXJkcyIsanNvbi5kdW1wcyhqLGVuc3VyZV9hc2NpaT1GYWxzZSkuZW5jb2RlKCd1dGY4JykuZGVjb2RlKCkpCiAgICAKICAgIHJldHVybiBoYXNoTWFwCgpkZWYgbGlzdF9vbl9pbnB1dChoYXNoTWFwLF9maWxlcz1Ob25lLF9kYXRhPU5vbmUpOgogICAgaWYgaGFzaE1hcC5nZXQoJ3NlbGVjdGVkX2NhcmRfa2V5Jyk6CiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCAi0JrQsNGA0YLQvtGH0LrQsCDQv9GC0LjRhtGLIikKICAgIGlmIGhhc2hNYXAuZ2V0KCJsaXN0ZW5lciIpPT0nT05fQkFDS19QUkVTU0VEJzogCiAgICAgICAgaGFzaE1hcC5wdXQoIlNob3dTY3JlZW4iLCLQnNC10L3RjiIpCiAgICBpZiBoYXNoTWFwLmdldCgibGlzdGVuZXIiKT09ImNyZWF0ZV9uZXciOgogICAgICAgIGhhc2hNYXAucHV0KCJTaG93U2NyZWVuIiwi0KHQvtC30LTQsNC90LjQtSDQvdC+0LLQvtC5INC/0YLQuNGG0YsiKQogICAgcmV0dXJuIGhhc2hNYXAKCgojIC0tLS0tLS0g0J7QsdGA0LDQsdC+0YLRh9C40LrQuCDRjdC60YDQsNC90LAg0J/RgtC40YbRiywg0LrQvtGC0L7RgNGL0YUg0Y8g0LLQuNC00LXQuyAtLS0tLS0tCmRlZiBpX3Nhd19vbl9zdGFydChoYXNoTWFwLCBmaWxlcz1Ob25lLCBkYXRhPU5vbmUpOgogICAgbm9DbGFzcyA9IGpjbGFzcygicnUudHJhdmVsZm9vZC5zaW1wbGVfdWkuTm9TUUwiKQogICAgbmNsID0gbm9DbGFzcygidGVzdF9ub3NxbCIpCgogICAgaiA9IHsgImN1c3RvbWNhcmRzIjogICAgICAgICB7CiAgICAgICAgICAgIAogICAgICAgICAgICAibGF5b3V0IjogewogICAgICAgICAgICAidHlwZSI6ICJMaW5lYXJMYXlvdXQiLAogICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAiaGVpZ2h0IjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICJ3aWR0aCI6ICJtYXRjaF9wYXJlbnQiLAogICAgICAgICAgICAid2VpZ2h0IjogIjAiLAogICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAiaG9yaXpvbnRhbCIsCiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAid2lkdGgiOiAibWF0Y2hfcGFyZW50IiwKICAgICAgICAgICAgICAgICJ3ZWlnaHQiOiAiMCIsCiAgICAgICAgICAgICAgICAiRWxlbWVudHMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAidHlwZSI6ICJQaWN0dXJlIiwKICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgIlZhbHVlIjogIkBwaWMxIiwKICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAibWFzayI6ICIiLAogICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIsCiAgICAgICAgICAgICAgICAiVGV4dFNpemUiOiAiMTYiLAogICAgICAgICAgICAgICAgIlRleHRDb2xvciI6ICIjREI3MDkzIiwKICAgICAgICAgICAgICAgICJUZXh0Qm9sZCI6IFRydWUsCiAgICAgICAgICAgICAgICAiVGV4dEl0YWxpYyI6IEZhbHNlLAogICAgICAgICAgICAgICAgIkJhY2tncm91bmRDb2xvciI6ICIiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAiaGVpZ2h0IjogIndyYXBfY29udGVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogMgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJ0eXBlIjogIkxpbmVhckxheW91dCIsCiAgICAgICAgICAgICAgICAib3JpZW50YXRpb24iOiAidmVydGljYWwiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgIndpZHRoIjogIm1hdGNoX3BhcmVudCIsCiAgICAgICAgICAgICAgICAid2VpZ2h0IjogIjEiLAogICAgICAgICAgICAgICAgIkVsZW1lbnRzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICAgICAic2hvd19ieV9jb25kaXRpb24iOiAiIiwKICAgICAgICAgICAgICAgICAgICAiVmFsdWUiOiAiQHN0cmluZzEiLAogICAgICAgICAgICAgICAgICAgICJOb1JlZnJlc2giOiBGYWxzZSwKICAgICAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgICAgICJtYXNrIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIlZhcmlhYmxlIjogIiIKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgInR5cGUiOiAiVGV4dFZpZXciLAogICAgICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgICAgICJWYWx1ZSI6ICJAc3RyaW5nMiIsCiAgICAgICAgICAgICAgICAgICAgIk5vUmVmcmVzaCI6IEZhbHNlLAogICAgICAgICAgICAgICAgICAgICJkb2N1bWVudF90eXBlIjogIiIsCiAgICAgICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICAgICAiVmFyaWFibGUiOiAiIgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJ0eXBlIjogIlRleHRWaWV3IiwKICAgICAgICAgICAgICAgICJzaG93X2J5X2NvbmRpdGlvbiI6ICIiLAogICAgICAgICAgICAgICAgIlZhbHVlIjogIkBkZXNjciIsCiAgICAgICAgICAgICAgICAiTm9SZWZyZXNoIjogRmFsc2UsCiAgICAgICAgICAgICAgICAiZG9jdW1lbnRfdHlwZSI6ICIiLAogICAgICAgICAgICAgICAgIm1hc2siOiAiIiwKICAgICAgICAgICAgICAgICJWYXJpYWJsZSI6ICIiLAogICAgICAgICAgICAgICAgIlRleHRTaXplIjogIi0xIiwKICAgICAgICAgICAgICAgICJUZXh0Q29sb3IiOiAiIzZGOTM5MyIsCiAgICAgICAgICAgICAgICAiVGV4dEJvbGQiOiBGYWxzZSwKICAgICAgICAgICAgICAgICJUZXh0SXRhbGljIjogVHJ1ZSwKICAgICAgICAgICAgICAgICJCYWNrZ3JvdW5kQ29sb3IiOiAiIiwKICAgICAgICAgICAgICAgICJ3aWR0aCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgImhlaWdodCI6ICJ3cmFwX2NvbnRlbnQiLAogICAgICAgICAgICAgICAgIndlaWdodCI6IDAKICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfQoKICAgIH0KICAgIH0KCgogICAga2V5cyA9IG5jbC5nZXRhbGxrZXlzKCkKICAgIGprZXlzID0ganNvbi5sb2FkcyhrZXlzKQogICAKICAgIGpbImN1c3RvbWNhcmRzIl1bImNhcmRzZGF0YSJdPVtdCiAgICBmb3IgaSBpbiBqa2V5czoKICAgICAgICBiaXJkID0ganNvbi5sb2FkcyhuY2wuZ2V0KGkpKQogICAgICAgIGMgPSAgewogICAgICAgICJrZXkiOiBpLAogICAgICAgICJkZXNjciI6ICJQb3MuICIraSwKICAgICAgICAic3RyaW5nMSI6IGJpcmRbJ25hbWUnXSwKICAgICAgICAic3RyaW5nMiI6IGJpcmRbJ2NvbG9yJ10sCiAgICAgICAgfQogICAgICAgIGlmICdmb3RvJyBpbiBiaXJkLmtleXMoKToKICAgICAgICAgICAgY1sicGljMSJdID0gYmlyZFsnZm90byddCiAgICAgICAgalsiY3VzdG9tY2FyZHMiXVsiY2FyZHNkYXRhIl0uYXBwZW5kKGMpCgogICAgaGFzaE1hcC5wdXQoImNhcmRzIixqc29uLmR1bXBzKGosZW5zdXJlX2FzY2lpPUZhbHNlKS5lbmNvZGUoJ3V0ZjgnKS5kZWNvZGUoKSkKICAgIAogICAgcmV0dXJuIGhhc2hNYXAKCmRlZiBpX3Nhd19vbl9pbnB1dChoYXNoTWFwLCBmaWxlcz1Ob25lLCBkYXRhPU5vbmUpOgogICAgcmV0dXJuIGhhc2hNYXA=",
        "Launch": "Menu"
    }
}